<!DOCTYPE html><html lang="ja"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>YUMEBLOG | Terraformのインストールでやっていることを追う</title><link rel="stylesheet" href="/_astro/_slug_.CCgM0VDp.css"></head> <body class="py-8 sm:py-12 bg-gray-50"> <div class="max-w-4xl mx-auto px-8 sm:px-16"> <header class="text-center border-b border-gray-300 pb-4 mb-6"><h1 class="text-3xl font-bold text-gray-600">Yume Blog</h1></header>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="dr5gO" prefix="r2" component-url="/_astro/TitleHeader.CwZwICnB.js" component-export="default" renderer-url="/_astro/client.DL-_0xdV.js" props="{&quot;post&quot;:[0,{&quot;id&quot;:[0,&quot;12-de76a3.md&quot;],&quot;data&quot;:[0,{&quot;isDraft&quot;:[0,false],&quot;title&quot;:[0,&quot;Terraformのインストールでやっていることを追う&quot;],&quot;tags&quot;:[1,[[0,&quot;terraform&quot;],[0,&quot;ubuntu&quot;]]],&quot;publishDate&quot;:[3,&quot;2025-09-12T00:00:00.000Z&quot;]}],&quot;body&quot;:[0,&quot;Terraformのセットアップが必要になり、公式が紹介しているubuntuのインストール方法を見に行ったところ以下のコマンドが掲載されていた。\n\n```sh\nwget -O - https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\necho \&quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(grep -oP &#39;(?&lt;=UBUNTU_CODENAME=).*&#39; /etc/os-release || lsb_release -cs) main\&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\nsudo apt update &amp;&amp; sudo apt install terraform\n```\n\nよく分かってないと思ったので、何をやっているのか追っていこうと思う。\n\n## コマンドの構成\n\n以下の3つのパイプラインに分かれているので、それぞれ順に見ていく。\n\n1つ目\n\n```sh\nwget -O - https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n```\n\n2つ目\n\n```sh\necho \&quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(grep -oP &#39;(?&lt;=UBUNTU_CODENAME=).*&#39; /etc/os-release || lsb_release -cs) main\&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n```\n\n3つ目\n\n```sh\nsudo apt update &amp;&amp; sudo apt install terraform\n```\n\n### 1つ目のパイプライン\n\n```sh\nwget -O - https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n```\n\n`wget -O -` で指定したURLの内容を標準出力に出す。今回の場合は Hashicorp のGPGキー。\n\nGPGは[RFC 9580](https://www.rfc-editor.org/rfc/rfc9580)で提案されているOpenPGPの実装で、公開鍵暗号または対称暗号アルゴリズムによるディジタル署名、圧縮、キー管理を提供するもの。\n\nこのコマンドでは以下から始まるGPGキーが得られる。\n\n```txt\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\n```\n\n続いて `gpg` コマンド。\n\n`--dearmor` は入力されたASCIIのGPGキーをバイナリ形式に変換するオプションで、`-o` は結果の出力先。ここで指定されているのはubuntuでの標準的なキーリング置き場。\n\n以上、1つ目のパイプライン。図に表してみる。\n\n```mermaid\ngraph\nwget\nhasi[apt.releases.hashicorp.com/gpg]\nkey[GPGキー]\ngpg\nkeyrings[\&quot;/usr/share/keyrings/hashicorp-archive-keyring.gpg\&quot;]\n\nwget --1.GPGキー取得--&gt; hasi\nwget --2.標準出力--&gt; key\ngpg --3.バイナリ変換--&gt; key\ngpg --4.保存--&gt; keyrings\n```\n\n### 2つ目のパイプライン\n\n```sh\necho \&quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(grep -oP &#39;(?&lt;=UBUNTU_CODENAME=).*&#39; /etc/os-release || lsb_release -cs) main\&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n```\n\nこのパイプラインでは、aptパッケージマネージャが参照する追加のパッケージソース設定を作成している。\n\n一般的な形式は以下\n\n```\ndeb [options] uri suite [component1] [component2] [...]\n```\n\n- deb: バイナリパッケージ\n- [options]: `arch=`, `signed-by=` 等のオプション\n- uri: リポジトリのURL\n- suite: ディストリビューション名\n- component: main, contrib, non-free等のセクション\n\n詳細は `man 5 sources.list` で確認可能。\n\n上記の形式を作るために `echo` を使っている。\n\n2つ目のパイプラインを図に表すと以下。\n\n```mermaid\ngraph\necho\ntee\nkeyrings[\&quot;/usr/share/keyrings/hashicorp-archive-keyring.gpg\&quot;]\nlist[\&quot;/etc/apt/sources.list.d/hashicorp.list\&quot;]\ndpkg[dpkg等]\nrecord[\&quot;deb [options] uri ...\&quot;]\n\necho --1.利用--&gt; keyrings\necho --1.利用--&gt; dpkg\necho --2.標準出力--&gt; record\ntee --3.利用--&gt; record\ntee --4.出力--&gt; list\n```\n\n### 3つ目のパイプライン\n\n```sh\nsudo apt update &amp;&amp; sudo apt install terraform\n```\n\nパッケージをアップデートして terraform をインストールしている...だけだと味気ないので深掘り。\n\nアップデートをする際、前のパイプラインで追加した `hashicorp.list` を見てパッケージ情報の入ったInReleaseファイルを取得する。\nこの中にはパッケージリストのハッシュ値とその署名が含まれているので、それをGPGキーで検証することで、情報が改竄されていないことを確認する。\n\nインストール時も実際のパッケージファイルに対して同様の検証を行っている模様。\n\n図にすると以下。\n\n```mermaid\ngraph\nupdate[apt update]\ninstall[apt install terraform]\nlist[パッケージリスト]\npackage[パッケージ]\nkey[hashicorp-archive-keyring.gpg]\n\nupdate --1.取得--&gt; list\nupdate --2.利用--&gt; key\nupdate --2.検証--&gt; list\ninstall --3.取得--&gt; package\ninstall --4.利用--&gt; key\ninstall --4.検証--&gt; package\n```\n\n## 感想\n\nパッケージマネージャ周りがよく分かっていないと思い知らされた。\n`apt update`, `apt install` 周りはまた調べることにする。&quot;],&quot;filePath&quot;:[0,&quot;src/content/blog/12-de76a3.md&quot;],&quot;digest&quot;:[0,&quot;28a78c9c9f337ff2&quot;],&quot;rendered&quot;:[0,{&quot;html&quot;:[0,&quot;&lt;p&gt;Terraformのセットアップが必要になり、公式が紹介しているubuntuのインストール方法を見に行ったところ以下のコマンドが掲載されていた。&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;wget&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -O&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; -&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; https://apt.releases.hashicorp.com/gpg&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; gpg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --dearmor&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -o&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /usr/share/keyrings/hashicorp-archive-keyring.gpg&lt;/span&gt;&lt;/span&gt;\n&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt;echo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; \&quot;deb [arch=$(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;dpkg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --print-architecture&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;grep&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -oP&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; &#39;(?&amp;#x3C;=UBUNTU_CODENAME=).*&#39; /etc/os-release &lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt;||&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; lsb_release&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -cs&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) main\&quot;&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; tee&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /etc/apt/sources.list.d/hashicorp.list&lt;/span&gt;&lt;/span&gt;\n&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; update&lt;/span&gt;&lt;span style=\&quot;color:#E1E4E8\&quot;&gt; &amp;#x26;&amp;#x26; &lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; install&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; terraform&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;よく分かってないと思ったので、何をやっているのか追っていこうと思う。&lt;/p&gt;\n&lt;h2 id=\&quot;コマンドの構成\&quot;&gt;コマンドの構成&lt;/h2&gt;\n&lt;p&gt;以下の3つのパイプラインに分かれているので、それぞれ順に見ていく。&lt;/p&gt;\n&lt;p&gt;1つ目&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;wget&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -O&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; -&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; https://apt.releases.hashicorp.com/gpg&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; gpg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --dearmor&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -o&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /usr/share/keyrings/hashicorp-archive-keyring.gpg&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2つ目&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt;echo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; \&quot;deb [arch=$(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;dpkg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --print-architecture&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;grep&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -oP&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; &#39;(?&amp;#x3C;=UBUNTU_CODENAME=).*&#39; /etc/os-release &lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt;||&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; lsb_release&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -cs&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) main\&quot;&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; tee&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /etc/apt/sources.list.d/hashicorp.list&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3つ目&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; update&lt;/span&gt;&lt;span style=\&quot;color:#E1E4E8\&quot;&gt; &amp;#x26;&amp;#x26; &lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; install&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; terraform&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&quot;1つ目のパイプライン\&quot;&gt;1つ目のパイプライン&lt;/h3&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;wget&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -O&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; -&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; https://apt.releases.hashicorp.com/gpg&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; gpg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --dearmor&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -o&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /usr/share/keyrings/hashicorp-archive-keyring.gpg&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;code&gt;wget -O -&lt;/code&gt; で指定したURLの内容を標準出力に出す。今回の場合は Hashicorp のGPGキー。&lt;/p&gt;\n&lt;p&gt;GPGは&lt;a href=\&quot;https://www.rfc-editor.org/rfc/rfc9580\&quot;&gt;RFC 9580&lt;/a&gt;で提案されているOpenPGPの実装で、公開鍵暗号または対称暗号アルゴリズムによるディジタル署名、圧縮、キー管理を提供するもの。&lt;/p&gt;\n&lt;p&gt;このコマンドでは以下から始まるGPGキーが得られる。&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;txt\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span&gt;-----BEGIN PGP PUBLIC KEY BLOCK-----&lt;/span&gt;&lt;/span&gt;\n&lt;span class=\&quot;line\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;続いて &lt;code&gt;gpg&lt;/code&gt; コマンド。&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;--dearmor&lt;/code&gt; は入力されたASCIIのGPGキーをバイナリ形式に変換するオプションで、&lt;code&gt;-o&lt;/code&gt; は結果の出力先。ここで指定されているのはubuntuでの標準的なキーリング置き場。&lt;/p&gt;\n&lt;p&gt;以上、1つ目のパイプライン。図に表してみる。&lt;/p&gt;\n&lt;svg aria-roledescription=\&quot;flowchart-v2\&quot; role=\&quot;graphics-document document\&quot; viewBox=\&quot;0 0 796.671875 222\&quot; style=\&quot;max-width: 796.671875px;\&quot; class=\&quot;flowchart\&quot; xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot; xmlns=\&quot;http://www.w3.org/2000/svg\&quot; width=\&quot;100%\&quot; id=\&quot;mermaid-0\&quot;&gt;&lt;style&gt;#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#333333;stroke:#333333;}#mermaid-0 .marker.cross{stroke:#333333;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:arial,sans-serif;color:#333;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span{color:#333;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#333;color:#333;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#333333;fill:none;}#mermaid-0 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}&lt;/style&gt;&lt;g&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-pointEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 0 L 10 5 L 0 10 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;4.5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-pointStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 5 L 10 10 L 10 0 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;11\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-circleEnd\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-circleStart\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;12\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-crossEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-0_flowchart-v2-crossStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;g class=\&quot;root\&quot;&gt;&lt;g class=\&quot;clusters\&quot;&gt;&lt;/g&gt;&lt;g class=\&quot;edgePaths\&quot;&gt;&lt;path marker-end=\&quot;url(#mermaid-0_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_wget_hasi_0\&quot; d=\&quot;M180.052,62L175.276,68.167C170.501,74.333,160.95,86.667,156.174,100.333C151.398,114,151.398,129,151.398,136.5L151.398,144\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-0_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_wget_key_0\&quot; d=\&quot;M247.859,58.71L261.141,65.425C274.423,72.14,300.987,85.57,322.071,99.984C343.156,114.397,358.761,129.794,366.563,137.492L374.366,145.191\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-0_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_gpg_key_0\&quot; d=\&quot;M567.492,57.471L554.139,64.393C540.786,71.314,514.081,85.157,492.322,99.794C470.563,114.432,453.751,129.863,445.345,137.579L436.94,145.295\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-0_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_gpg_keyrings_0\&quot; d=\&quot;M628.002,62L631.921,68.167C635.84,74.333,643.678,86.667,647.597,98.333C651.516,110,651.516,121,651.516,126.5L651.516,132\&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g class=\&quot;edgeLabels\&quot;&gt;&lt;g transform=\&quot;translate(151.3984375, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-48.453125, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;96.90625\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;1.GPGキー取得&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(318.8359, 94.59402)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-30.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;61.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;2.標準出力&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(495.26739, 94.90898)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-42.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;85.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;3.バイナリ変換&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(651.515625, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;4.保存&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=\&quot;nodes\&quot;&gt;&lt;g transform=\&quot;translate(200.9609375, 35)\&quot; id=\&quot;flowchart-wget-0\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;93.796875\&quot; y=\&quot;-27\&quot; x=\&quot;-46.8984375\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-16.8984375, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;33.796875\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;wget&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(151.3984375, 175)\&quot; id=\&quot;flowchart-hasi-1\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;286.796875\&quot; y=\&quot;-27\&quot; x=\&quot;-143.3984375\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-113.3984375, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;226.796875\&quot;&gt;&lt;div style=\&quot;display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;apt.releases.hashicorp.com/gpg&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(404.578125, 175)\&quot; id=\&quot;flowchart-key-2\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;119.5625\&quot; y=\&quot;-27\&quot; x=\&quot;-59.78125\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-29.78125, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;59.5625\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;GPGキー&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(610.84375, 35)\&quot; id=\&quot;flowchart-gpg-3\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;86.703125\&quot; y=\&quot;-27\&quot; x=\&quot;-43.3515625\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-13.3515625, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;26.703125\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;gpg&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(651.515625, 175)\&quot; id=\&quot;flowchart-keyrings-4\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;78\&quot; width=\&quot;274.3125\&quot; y=\&quot;-39\&quot; x=\&quot;-137.15625\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-107.15625, -24)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;48\&quot; width=\&quot;214.3125\&quot;&gt;&lt;div style=\&quot;display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;/usr/share/keyrings/hashicorp-archive-keyring.gpg&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;\n&lt;h3 id=\&quot;2つ目のパイプライン\&quot;&gt;2つ目のパイプライン&lt;/h3&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt;echo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; \&quot;deb [arch=$(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;dpkg&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; --print-architecture&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;grep&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -oP&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; &#39;(?&amp;#x3C;=UBUNTU_CODENAME=).*&#39; /etc/os-release &lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt;||&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; lsb_release&lt;/span&gt;&lt;span style=\&quot;color:#79B8FF\&quot;&gt; -cs&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt;) main\&quot;&lt;/span&gt;&lt;span style=\&quot;color:#F97583\&quot;&gt; |&lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt; sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; tee&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; /etc/apt/sources.list.d/hashicorp.list&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;このパイプラインでは、aptパッケージマネージャが参照する追加のパッケージソース設定を作成している。&lt;/p&gt;\n&lt;p&gt;一般的な形式は以下&lt;/p&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;plaintext\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span&gt;deb [options] uri suite [component1] [component2] [...]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;ul&gt;\n&lt;li&gt;deb: バイナリパッケージ&lt;/li&gt;\n&lt;li&gt;[options]: &lt;code&gt;arch=&lt;/code&gt;, &lt;code&gt;signed-by=&lt;/code&gt; 等のオプション&lt;/li&gt;\n&lt;li&gt;uri: リポジトリのURL&lt;/li&gt;\n&lt;li&gt;suite: ディストリビューション名&lt;/li&gt;\n&lt;li&gt;component: main, contrib, non-free等のセクション&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;詳細は &lt;code&gt;man 5 sources.list&lt;/code&gt; で確認可能。&lt;/p&gt;\n&lt;p&gt;上記の形式を作るために &lt;code&gt;echo&lt;/code&gt; を使っている。&lt;/p&gt;\n&lt;p&gt;2つ目のパイプラインを図に表すと以下。&lt;/p&gt;\n&lt;svg aria-roledescription=\&quot;flowchart-v2\&quot; role=\&quot;graphics-document document\&quot; viewBox=\&quot;0 0 1046.765625 222\&quot; style=\&quot;max-width: 1046.765625px;\&quot; class=\&quot;flowchart\&quot; xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot; xmlns=\&quot;http://www.w3.org/2000/svg\&quot; width=\&quot;100%\&quot; id=\&quot;mermaid-1\&quot;&gt;&lt;style&gt;#mermaid-1{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-1 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-1 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-1 .error-icon{fill:#552222;}#mermaid-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-1 .edge-thickness-normal{stroke-width:1px;}#mermaid-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1 .marker{fill:#333333;stroke:#333333;}#mermaid-1 .marker.cross{stroke:#333333;}#mermaid-1 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-1 p{margin:0;}#mermaid-1 .label{font-family:arial,sans-serif;color:#333;}#mermaid-1 .cluster-label text{fill:#333;}#mermaid-1 .cluster-label span{color:#333;}#mermaid-1 .cluster-label span p{background-color:transparent;}#mermaid-1 .label text,#mermaid-1 span{fill:#333;color:#333;}#mermaid-1 .node rect,#mermaid-1 .node circle,#mermaid-1 .node ellipse,#mermaid-1 .node polygon,#mermaid-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1 .rough-node .label text,#mermaid-1 .node .label text,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-anchor:middle;}#mermaid-1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-1 .rough-node .label,#mermaid-1 .node .label,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-align:center;}#mermaid-1 .node.clickable{cursor:pointer;}#mermaid-1 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-1 .arrowheadPath{fill:#333333;}#mermaid-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-1 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1 .cluster text{fill:#333;}#mermaid-1 .cluster span{color:#333;}#mermaid-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1 rect.text{fill:none;stroke-width:0;}#mermaid-1 .icon-shape,#mermaid-1 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .icon-shape p,#mermaid-1 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-1 .icon-shape rect,#mermaid-1 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-1 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-1 :root{--mermaid-font-family:arial,sans-serif;}&lt;/style&gt;&lt;g&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-pointEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 0 L 10 5 L 0 10 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;4.5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-pointStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 5 L 10 10 L 10 0 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;11\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-circleEnd\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-circleStart\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;12\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-crossEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-1_flowchart-v2-crossStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;g class=\&quot;root\&quot;&gt;&lt;g class=\&quot;clusters\&quot;&gt;&lt;/g&gt;&lt;g class=\&quot;edgePaths\&quot;&gt;&lt;path marker-end=\&quot;url(#mermaid-1_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_echo_keyrings_0\&quot; d=\&quot;M338.313,47.6L306.12,56.167C273.927,64.734,209.542,81.867,177.349,95.933C145.156,110,145.156,121,145.156,126.5L145.156,132\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-1_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_echo_dpkg_0\&quot; d=\&quot;M385.664,62L385.664,68.167C385.664,74.333,385.664,86.667,385.664,100.333C385.664,114,385.664,129,385.664,136.5L385.664,144\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-1_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_echo_record_0\&quot; d=\&quot;M433.016,57.572L447.5,64.477C461.984,71.381,490.953,85.191,511.98,99.755C533.007,114.319,546.092,129.639,552.634,137.299L559.176,144.958\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-1_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_tee_record_0\&quot; d=\&quot;M814.914,52.554L796.779,60.295C778.643,68.036,742.372,83.518,711.771,99.072C681.17,114.625,656.238,130.251,643.772,138.063L631.307,145.876\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-1_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_tee_list_0\&quot; d=\&quot;M868.135,62L870.898,68.167C873.66,74.333,879.186,86.667,881.948,100.333C884.711,114,884.711,129,884.711,136.5L884.711,144\&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g class=\&quot;edgeLabels\&quot;&gt;&lt;g transform=\&quot;translate(145.15625, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;1.利用&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(385.6640625, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;1.利用&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(505.55363, 92.15073)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-30.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;61.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;2.標準出力&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(706.1015625, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;3.利用&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(884.7109375, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;4.出力&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=\&quot;nodes\&quot;&gt;&lt;g transform=\&quot;translate(385.6640625, 35)\&quot; id=\&quot;flowchart-echo-0\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;94.703125\&quot; y=\&quot;-27\&quot; x=\&quot;-47.3515625\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-17.3515625, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;34.703125\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;echo&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(856.0390625, 35)\&quot; id=\&quot;flowchart-tee-1\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;82.25\&quot; y=\&quot;-27\&quot; x=\&quot;-41.125\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-11.125, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;22.25\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;tee&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(145.15625, 175)\&quot; id=\&quot;flowchart-keyrings-2\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;78\&quot; width=\&quot;274.3125\&quot; y=\&quot;-39\&quot; x=\&quot;-137.15625\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-107.15625, -24)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;48\&quot; width=\&quot;214.3125\&quot;&gt;&lt;div style=\&quot;display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;/usr/share/keyrings/hashicorp-archive-keyring.gpg&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(884.7109375, 175)\&quot; id=\&quot;flowchart-list-3\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;308.109375\&quot; y=\&quot;-27\&quot; x=\&quot;-154.0546875\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-124.0546875, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;248.109375\&quot;&gt;&lt;div style=\&quot;display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;/etc/apt/sources.list.d/hashicorp.list&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(385.6640625, 175)\&quot; id=\&quot;flowchart-dpkg-4\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;106.703125\&quot; y=\&quot;-27\&quot; x=\&quot;-53.3515625\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-23.3515625, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;46.703125\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;dpkg等&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(584.8359375, 175)\&quot; id=\&quot;flowchart-record-5\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;191.640625\&quot; y=\&quot;-27\&quot; x=\&quot;-95.8203125\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-65.8203125, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;131.640625\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;deb [options] uri ...&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;\n&lt;h3 id=\&quot;3つ目のパイプライン\&quot;&gt;3つ目のパイプライン&lt;/h3&gt;\n&lt;pre class=\&quot;astro-code github-dark\&quot; style=\&quot;background-color:#24292e;color:#e1e4e8; overflow-x: auto;\&quot; tabindex=\&quot;0\&quot; data-language=\&quot;sh\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;line\&quot;&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; update&lt;/span&gt;&lt;span style=\&quot;color:#E1E4E8\&quot;&gt; &amp;#x26;&amp;#x26; &lt;/span&gt;&lt;span style=\&quot;color:#B392F0\&quot;&gt;sudo&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; apt&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; install&lt;/span&gt;&lt;span style=\&quot;color:#9ECBFF\&quot;&gt; terraform&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;パッケージをアップデートして terraform をインストールしている…だけだと味気ないので深掘り。&lt;/p&gt;\n&lt;p&gt;アップデートをする際、前のパイプラインで追加した &lt;code&gt;hashicorp.list&lt;/code&gt; を見てパッケージ情報の入ったInReleaseファイルを取得する。\nこの中にはパッケージリストのハッシュ値とその署名が含まれているので、それをGPGキーで検証することで、情報が改竄されていないことを確認する。&lt;/p&gt;\n&lt;p&gt;インストール時も実際のパッケージファイルに対して同様の検証を行っている模様。&lt;/p&gt;\n&lt;p&gt;図にすると以下。&lt;/p&gt;\n&lt;svg aria-roledescription=\&quot;flowchart-v2\&quot; role=\&quot;graphics-document document\&quot; viewBox=\&quot;0 0 652 222\&quot; style=\&quot;max-width: 652px;\&quot; class=\&quot;flowchart\&quot; xmlns:xlink=\&quot;http://www.w3.org/1999/xlink\&quot; xmlns=\&quot;http://www.w3.org/2000/svg\&quot; width=\&quot;100%\&quot; id=\&quot;mermaid-2\&quot;&gt;&lt;style&gt;#mermaid-2{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-2 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-2 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-2 .error-icon{fill:#552222;}#mermaid-2 .error-text{fill:#552222;stroke:#552222;}#mermaid-2 .edge-thickness-normal{stroke-width:1px;}#mermaid-2 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-2 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-2 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-2 .marker{fill:#333333;stroke:#333333;}#mermaid-2 .marker.cross{stroke:#333333;}#mermaid-2 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-2 p{margin:0;}#mermaid-2 .label{font-family:arial,sans-serif;color:#333;}#mermaid-2 .cluster-label text{fill:#333;}#mermaid-2 .cluster-label span{color:#333;}#mermaid-2 .cluster-label span p{background-color:transparent;}#mermaid-2 .label text,#mermaid-2 span{fill:#333;color:#333;}#mermaid-2 .node rect,#mermaid-2 .node circle,#mermaid-2 .node ellipse,#mermaid-2 .node polygon,#mermaid-2 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-2 .rough-node .label text,#mermaid-2 .node .label text,#mermaid-2 .image-shape .label,#mermaid-2 .icon-shape .label{text-anchor:middle;}#mermaid-2 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-2 .rough-node .label,#mermaid-2 .node .label,#mermaid-2 .image-shape .label,#mermaid-2 .icon-shape .label{text-align:center;}#mermaid-2 .node.clickable{cursor:pointer;}#mermaid-2 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-2 .arrowheadPath{fill:#333333;}#mermaid-2 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-2 .flowchart-link{stroke:#333333;fill:none;}#mermaid-2 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-2 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-2 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-2 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-2 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-2 .cluster text{fill:#333;}#mermaid-2 .cluster span{color:#333;}#mermaid-2 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-2 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-2 rect.text{fill:none;stroke-width:0;}#mermaid-2 .icon-shape,#mermaid-2 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-2 .icon-shape p,#mermaid-2 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-2 .icon-shape rect,#mermaid-2 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-2 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-2 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-2 :root{--mermaid-font-family:arial,sans-serif;}&lt;/style&gt;&lt;g&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-pointEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 0 L 10 5 L 0 10 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;8\&quot; markerWidth=\&quot;8\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;4.5\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-pointStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 0 5 L 10 10 L 10 0 z\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;11\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-circleEnd\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 10 10\&quot; class=\&quot;marker flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-circleStart\&quot;&gt;&lt;circle style=\&quot;stroke-width: 1; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; r=\&quot;5\&quot; cy=\&quot;5\&quot; cx=\&quot;5\&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;12\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-crossEnd\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;marker orient=\&quot;auto\&quot; markerHeight=\&quot;11\&quot; markerWidth=\&quot;11\&quot; markerUnits=\&quot;userSpaceOnUse\&quot; refY=\&quot;5.2\&quot; refX=\&quot;-1\&quot; viewBox=\&quot;0 0 11 11\&quot; class=\&quot;marker cross flowchart-v2\&quot; id=\&quot;mermaid-2_flowchart-v2-crossStart\&quot;&gt;&lt;path style=\&quot;stroke-width: 2; stroke-dasharray: 1, 0;\&quot; class=\&quot;arrowMarkerPath\&quot; d=\&quot;M 1,1 l 9,9 M 10,1 l -9,9\&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;g class=\&quot;root\&quot;&gt;&lt;g class=\&quot;clusters\&quot;&gt;&lt;/g&gt;&lt;g class=\&quot;edgePaths\&quot;&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_update_list_0\&quot; d=\&quot;M107.056,62L98.768,68.167C90.48,74.333,73.904,86.667,68.462,100.376C63.019,114.086,68.711,129.172,71.556,136.715L74.402,144.257\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_update_key_0\&quot; d=\&quot;M185.67,62L195.337,68.167C205.004,74.333,224.338,86.667,241.614,98.597C258.89,110.528,274.109,122.056,281.718,127.821L289.327,133.585\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_update_list_2\&quot; d=\&quot;M161.478,62L165.62,68.167C169.761,74.333,178.045,86.667,171.937,100.597C165.829,114.528,145.33,130.056,135.081,137.821L124.831,145.585\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_install_package_0\&quot; d=\&quot;M512.319,62L509.045,68.167C505.77,74.333,499.221,86.667,505.248,100.574C511.275,114.48,529.877,129.961,539.179,137.701L548.48,145.441\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_install_key_0\&quot; d=\&quot;M488.127,62L479.327,68.167C470.528,74.333,452.928,86.667,437.23,98.574C421.532,110.48,407.736,121.961,400.838,127.701L393.94,133.441\&quot;&gt;&lt;/path&gt;&lt;path marker-end=\&quot;url(#mermaid-2_flowchart-v2-pointEnd)\&quot; style=\&quot;\&quot; class=\&quot;edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\&quot; id=\&quot;L_install_package_2\&quot; d=\&quot;M562.944,62L571.232,68.167C579.52,74.333,596.096,86.667,601.538,100.376C606.981,114.086,601.289,129.172,598.444,136.715L595.598,144.257\&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g class=\&quot;edgeLabels\&quot;&gt;&lt;g transform=\&quot;translate(57.328125, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;1.取得&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(243.671875, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;2.利用&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(171.74947, 110.04354)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;2.検証&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(492.671875, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;3.取得&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(435.328125, 99)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;4.利用&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(608.81624, 96.13121)\&quot; class=\&quot;edgeLabel\&quot;&gt;&lt;g transform=\&quot;translate(-18.671875, -12)\&quot; class=\&quot;label\&quot;&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;37.34375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; class=\&quot;labelBkg\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;edgeLabel\&quot;&gt;&lt;p&gt;4.検証&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=\&quot;nodes\&quot;&gt;&lt;g transform=\&quot;translate(143.34375, 35)\&quot; id=\&quot;flowchart-update-0\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;135.625\&quot; y=\&quot;-27\&quot; x=\&quot;-67.8125\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-37.8125, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;75.625\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;apt update&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(526.65625, 35)\&quot; id=\&quot;flowchart-install-1\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;196.9375\&quot; y=\&quot;-27\&quot; x=\&quot;-98.46875\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-68.46875, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;136.9375\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;apt install terraform&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(86, 175)\&quot; id=\&quot;flowchart-list-2\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;156\&quot; y=\&quot;-27\&quot; x=\&quot;-78\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-48, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;96\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;パッケージリスト&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(584, 175)\&quot; id=\&quot;flowchart-package-3\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;54\&quot; width=\&quot;120\&quot; y=\&quot;-27\&quot; x=\&quot;-60\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-30, -12)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;24\&quot; width=\&quot;60\&quot;&gt;&lt;div style=\&quot;display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;パッケージ&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=\&quot;translate(344, 175)\&quot; id=\&quot;flowchart-key-4\&quot; class=\&quot;node default\&quot;&gt;&lt;rect height=\&quot;78\&quot; width=\&quot;260\&quot; y=\&quot;-39\&quot; x=\&quot;-130\&quot; style=\&quot;\&quot; class=\&quot;basic label-container\&quot;&gt;&lt;/rect&gt;&lt;g transform=\&quot;translate(-100, -24)\&quot; style=\&quot;\&quot; class=\&quot;label\&quot;&gt;&lt;rect&gt;&lt;/rect&gt;&lt;foreignObject height=\&quot;48\&quot; width=\&quot;200\&quot;&gt;&lt;div style=\&quot;display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;span class=\&quot;nodeLabel\&quot;&gt;&lt;p&gt;hashicorp-archive-keyring.gpg&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/foreignObject&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;\n&lt;h2 id=\&quot;感想\&quot;&gt;感想&lt;/h2&gt;\n&lt;p&gt;パッケージマネージャ周りがよく分かっていないと思い知らされた。\n&lt;code&gt;apt update&lt;/code&gt;, &lt;code&gt;apt install&lt;/code&gt; 周りはまた調べることにする。&lt;/p&gt;&quot;],&quot;metadata&quot;:[0,{&quot;headings&quot;:[1,[[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;コマンドの構成&quot;],&quot;text&quot;:[0,&quot;コマンドの構成&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;1つ目のパイプライン&quot;],&quot;text&quot;:[0,&quot;1つ目のパイプライン&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;2つ目のパイプライン&quot;],&quot;text&quot;:[0,&quot;2つ目のパイプライン&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;3つ目のパイプライン&quot;],&quot;text&quot;:[0,&quot;3つ目のパイプライン&quot;]}],[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;感想&quot;],&quot;text&quot;:[0,&quot;感想&quot;]}]]],&quot;localImagePaths&quot;:[1,[]],&quot;remoteImagePaths&quot;:[1,[]],&quot;frontmatter&quot;:[0,{&quot;title&quot;:[0,&quot;Terraformのインストールでやっていることを追う&quot;],&quot;tags&quot;:[1,[[0,&quot;terraform&quot;],[0,&quot;ubuntu&quot;]]],&quot;publishDate&quot;:[3,&quot;2025-09-12T00:00:00.000Z&quot;]}],&quot;imagePaths&quot;:[1,[]]}]}],&quot;collection&quot;:[0,&quot;blog&quot;],&quot;slug&quot;:[0,&quot;12-de76a3&quot;],&quot;render&quot;:[0,null]}]}" ssr client="load" opts="{&quot;name&quot;:&quot;TitleHeader&quot;,&quot;value&quot;:true}" await-children><div class="grid grid-cols-1 sm:grid-cols-[1fr_auto] sm:gap-4 items-baseline"><div class="flex items-center gap-4 min-w-0"><div class="hidden sm:block"><button class="rounded-lg flex items-center text-gray-700 hover:text-gray-800 transition-colors duration-200 hover:bg-gray-100 p-1 group cursor-pointer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="transition-all duration-200"><path d="M19 12H5M12 19L5 12L12 5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path></svg></button></div><h2 class="text-2xl font-bold text-gray-700 min-w-0">Terraformのインストールでやっていることを追う</h2></div><div class="justify-self-end"><div class="flex gap-2"><span class="text-sm text-gray-500">公開日:</span><time class="text-sm text-gray-500">2025年9月12日</time></div></div></div><!--astro:end--></astro-island> <div class="mt-4 prose"> <p>Terraformのセットアップが必要になり、公式が紹介しているubuntuのインストール方法を見に行ったところ以下のコマンドが掲載されていた。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">wget</span><span style="color:#79B8FF"> -O</span><span style="color:#9ECBFF"> -</span><span style="color:#9ECBFF"> https://apt.releases.hashicorp.com/gpg</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> gpg</span><span style="color:#79B8FF"> --dearmor</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> /usr/share/keyrings/hashicorp-archive-keyring.gpg</span></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "deb [arch=$(</span><span style="color:#B392F0">dpkg</span><span style="color:#79B8FF"> --print-architecture</span><span style="color:#9ECBFF">) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(</span><span style="color:#B392F0">grep</span><span style="color:#79B8FF"> -oP</span><span style="color:#9ECBFF"> '(?&#x3C;=UBUNTU_CODENAME=).*' /etc/os-release </span><span style="color:#F97583">||</span><span style="color:#B392F0"> lsb_release</span><span style="color:#79B8FF"> -cs</span><span style="color:#9ECBFF">) main"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> tee</span><span style="color:#9ECBFF"> /etc/apt/sources.list.d/hashicorp.list</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> update</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> terraform</span></span></code></pre>
<p>よく分かってないと思ったので、何をやっているのか追っていこうと思う。</p>
<h2 id="コマンドの構成">コマンドの構成</h2>
<p>以下の3つのパイプラインに分かれているので、それぞれ順に見ていく。</p>
<p>1つ目</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">wget</span><span style="color:#79B8FF"> -O</span><span style="color:#9ECBFF"> -</span><span style="color:#9ECBFF"> https://apt.releases.hashicorp.com/gpg</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> gpg</span><span style="color:#79B8FF"> --dearmor</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> /usr/share/keyrings/hashicorp-archive-keyring.gpg</span></span></code></pre>
<p>2つ目</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "deb [arch=$(</span><span style="color:#B392F0">dpkg</span><span style="color:#79B8FF"> --print-architecture</span><span style="color:#9ECBFF">) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(</span><span style="color:#B392F0">grep</span><span style="color:#79B8FF"> -oP</span><span style="color:#9ECBFF"> '(?&#x3C;=UBUNTU_CODENAME=).*' /etc/os-release </span><span style="color:#F97583">||</span><span style="color:#B392F0"> lsb_release</span><span style="color:#79B8FF"> -cs</span><span style="color:#9ECBFF">) main"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> tee</span><span style="color:#9ECBFF"> /etc/apt/sources.list.d/hashicorp.list</span></span></code></pre>
<p>3つ目</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> update</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> terraform</span></span></code></pre>
<h3 id="1つ目のパイプライン">1つ目のパイプライン</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">wget</span><span style="color:#79B8FF"> -O</span><span style="color:#9ECBFF"> -</span><span style="color:#9ECBFF"> https://apt.releases.hashicorp.com/gpg</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> gpg</span><span style="color:#79B8FF"> --dearmor</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> /usr/share/keyrings/hashicorp-archive-keyring.gpg</span></span></code></pre>
<p><code>wget -O -</code> で指定したURLの内容を標準出力に出す。今回の場合は Hashicorp のGPGキー。</p>
<p>GPGは<a href="https://www.rfc-editor.org/rfc/rfc9580">RFC 9580</a>で提案されているOpenPGPの実装で、公開鍵暗号または対称暗号アルゴリズムによるディジタル署名、圧縮、キー管理を提供するもの。</p>
<p>このコマンドでは以下から始まるGPGキーが得られる。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="txt"><code><span class="line"><span>-----BEGIN PGP PUBLIC KEY BLOCK-----</span></span>
<span class="line"><span></span></span></code></pre>
<p>続いて <code>gpg</code> コマンド。</p>
<p><code>--dearmor</code> は入力されたASCIIのGPGキーをバイナリ形式に変換するオプションで、<code>-o</code> は結果の出力先。ここで指定されているのはubuntuでの標準的なキーリング置き場。</p>
<p>以上、1つ目のパイプライン。図に表してみる。</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 796.671875 222" style="max-width: 796.671875px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-0"><style>#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#333333;stroke:#333333;}#mermaid-0 .marker.cross{stroke:#333333;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:arial,sans-serif;color:#333;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span{color:#333;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#333;color:#333;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#333333;fill:none;}#mermaid-0 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-0_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-0_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-0_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-0_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-0_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-0_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-0_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_wget_hasi_0" d="M180.052,62L175.276,68.167C170.501,74.333,160.95,86.667,156.174,100.333C151.398,114,151.398,129,151.398,136.5L151.398,144"></path><path marker-end="url(#mermaid-0_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_wget_key_0" d="M247.859,58.71L261.141,65.425C274.423,72.14,300.987,85.57,322.071,99.984C343.156,114.397,358.761,129.794,366.563,137.492L374.366,145.191"></path><path marker-end="url(#mermaid-0_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_gpg_key_0" d="M567.492,57.471L554.139,64.393C540.786,71.314,514.081,85.157,492.322,99.794C470.563,114.432,453.751,129.863,445.345,137.579L436.94,145.295"></path><path marker-end="url(#mermaid-0_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_gpg_keyrings_0" d="M628.002,62L631.921,68.167C635.84,74.333,643.678,86.667,647.597,98.333C651.516,110,651.516,121,651.516,126.5L651.516,132"></path></g><g class="edgeLabels"><g transform="translate(151.3984375, 99)" class="edgeLabel"><g transform="translate(-48.453125, -12)" class="label"><foreignObject height="24" width="96.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>1.GPGキー取得</p></span></div></foreignObject></g></g><g transform="translate(318.8359, 94.59402)" class="edgeLabel"><g transform="translate(-30.671875, -12)" class="label"><foreignObject height="24" width="61.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>2.標準出力</p></span></div></foreignObject></g></g><g transform="translate(495.26739, 94.90898)" class="edgeLabel"><g transform="translate(-42.671875, -12)" class="label"><foreignObject height="24" width="85.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>3.バイナリ変換</p></span></div></foreignObject></g></g><g transform="translate(651.515625, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>4.保存</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(200.9609375, 35)" id="flowchart-wget-0" class="node default"><rect height="54" width="93.796875" y="-27" x="-46.8984375" style="" class="basic label-container"></rect><g transform="translate(-16.8984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="33.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>wget</p></span></div></foreignObject></g></g><g transform="translate(151.3984375, 175)" id="flowchart-hasi-1" class="node default"><rect height="54" width="286.796875" y="-27" x="-143.3984375" style="" class="basic label-container"></rect><g transform="translate(-113.3984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="226.796875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>apt.releases.hashicorp.com/gpg</p></span></div></foreignObject></g></g><g transform="translate(404.578125, 175)" id="flowchart-key-2" class="node default"><rect height="54" width="119.5625" y="-27" x="-59.78125" style="" class="basic label-container"></rect><g transform="translate(-29.78125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="59.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GPGキー</p></span></div></foreignObject></g></g><g transform="translate(610.84375, 35)" id="flowchart-gpg-3" class="node default"><rect height="54" width="86.703125" y="-27" x="-43.3515625" style="" class="basic label-container"></rect><g transform="translate(-13.3515625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="26.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>gpg</p></span></div></foreignObject></g></g><g transform="translate(651.515625, 175)" id="flowchart-keyrings-4" class="node default"><rect height="78" width="274.3125" y="-39" x="-137.15625" style="" class="basic label-container"></rect><g transform="translate(-107.15625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="214.3125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>/usr/share/keyrings/hashicorp-archive-keyring.gpg</p></span></div></foreignObject></g></g></g></g></g></svg>
<h3 id="2つ目のパイプライン">2つ目のパイプライン</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "deb [arch=$(</span><span style="color:#B392F0">dpkg</span><span style="color:#79B8FF"> --print-architecture</span><span style="color:#9ECBFF">) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(</span><span style="color:#B392F0">grep</span><span style="color:#79B8FF"> -oP</span><span style="color:#9ECBFF"> '(?&#x3C;=UBUNTU_CODENAME=).*' /etc/os-release </span><span style="color:#F97583">||</span><span style="color:#B392F0"> lsb_release</span><span style="color:#79B8FF"> -cs</span><span style="color:#9ECBFF">) main"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> tee</span><span style="color:#9ECBFF"> /etc/apt/sources.list.d/hashicorp.list</span></span></code></pre>
<p>このパイプラインでは、aptパッケージマネージャが参照する追加のパッケージソース設定を作成している。</p>
<p>一般的な形式は以下</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>deb [options] uri suite [component1] [component2] [...]</span></span></code></pre>
<ul>
<li>deb: バイナリパッケージ</li>
<li>[options]: <code>arch=</code>, <code>signed-by=</code> 等のオプション</li>
<li>uri: リポジトリのURL</li>
<li>suite: ディストリビューション名</li>
<li>component: main, contrib, non-free等のセクション</li>
</ul>
<p>詳細は <code>man 5 sources.list</code> で確認可能。</p>
<p>上記の形式を作るために <code>echo</code> を使っている。</p>
<p>2つ目のパイプラインを図に表すと以下。</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1046.765625 222" style="max-width: 1046.765625px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-1"><style>#mermaid-1{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-1 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-1 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-1 .error-icon{fill:#552222;}#mermaid-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-1 .edge-thickness-normal{stroke-width:1px;}#mermaid-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1 .marker{fill:#333333;stroke:#333333;}#mermaid-1 .marker.cross{stroke:#333333;}#mermaid-1 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-1 p{margin:0;}#mermaid-1 .label{font-family:arial,sans-serif;color:#333;}#mermaid-1 .cluster-label text{fill:#333;}#mermaid-1 .cluster-label span{color:#333;}#mermaid-1 .cluster-label span p{background-color:transparent;}#mermaid-1 .label text,#mermaid-1 span{fill:#333;color:#333;}#mermaid-1 .node rect,#mermaid-1 .node circle,#mermaid-1 .node ellipse,#mermaid-1 .node polygon,#mermaid-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1 .rough-node .label text,#mermaid-1 .node .label text,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-anchor:middle;}#mermaid-1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-1 .rough-node .label,#mermaid-1 .node .label,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-align:center;}#mermaid-1 .node.clickable{cursor:pointer;}#mermaid-1 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-1 .arrowheadPath{fill:#333333;}#mermaid-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-1 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1 .cluster text{fill:#333;}#mermaid-1 .cluster span{color:#333;}#mermaid-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1 rect.text{fill:none;stroke-width:0;}#mermaid-1 .icon-shape,#mermaid-1 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .icon-shape p,#mermaid-1 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-1 .icon-shape rect,#mermaid-1 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-1 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-1 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-1_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-1_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-1_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-1_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-1_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-1_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-1_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_echo_keyrings_0" d="M338.313,47.6L306.12,56.167C273.927,64.734,209.542,81.867,177.349,95.933C145.156,110,145.156,121,145.156,126.5L145.156,132"></path><path marker-end="url(#mermaid-1_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_echo_dpkg_0" d="M385.664,62L385.664,68.167C385.664,74.333,385.664,86.667,385.664,100.333C385.664,114,385.664,129,385.664,136.5L385.664,144"></path><path marker-end="url(#mermaid-1_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_echo_record_0" d="M433.016,57.572L447.5,64.477C461.984,71.381,490.953,85.191,511.98,99.755C533.007,114.319,546.092,129.639,552.634,137.299L559.176,144.958"></path><path marker-end="url(#mermaid-1_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_tee_record_0" d="M814.914,52.554L796.779,60.295C778.643,68.036,742.372,83.518,711.771,99.072C681.17,114.625,656.238,130.251,643.772,138.063L631.307,145.876"></path><path marker-end="url(#mermaid-1_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_tee_list_0" d="M868.135,62L870.898,68.167C873.66,74.333,879.186,86.667,881.948,100.333C884.711,114,884.711,129,884.711,136.5L884.711,144"></path></g><g class="edgeLabels"><g transform="translate(145.15625, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>1.利用</p></span></div></foreignObject></g></g><g transform="translate(385.6640625, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>1.利用</p></span></div></foreignObject></g></g><g transform="translate(505.55363, 92.15073)" class="edgeLabel"><g transform="translate(-30.671875, -12)" class="label"><foreignObject height="24" width="61.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>2.標準出力</p></span></div></foreignObject></g></g><g transform="translate(706.1015625, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>3.利用</p></span></div></foreignObject></g></g><g transform="translate(884.7109375, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>4.出力</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(385.6640625, 35)" id="flowchart-echo-0" class="node default"><rect height="54" width="94.703125" y="-27" x="-47.3515625" style="" class="basic label-container"></rect><g transform="translate(-17.3515625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="34.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>echo</p></span></div></foreignObject></g></g><g transform="translate(856.0390625, 35)" id="flowchart-tee-1" class="node default"><rect height="54" width="82.25" y="-27" x="-41.125" style="" class="basic label-container"></rect><g transform="translate(-11.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="22.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>tee</p></span></div></foreignObject></g></g><g transform="translate(145.15625, 175)" id="flowchart-keyrings-2" class="node default"><rect height="78" width="274.3125" y="-39" x="-137.15625" style="" class="basic label-container"></rect><g transform="translate(-107.15625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="214.3125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>/usr/share/keyrings/hashicorp-archive-keyring.gpg</p></span></div></foreignObject></g></g><g transform="translate(884.7109375, 175)" id="flowchart-list-3" class="node default"><rect height="54" width="308.109375" y="-27" x="-154.0546875" style="" class="basic label-container"></rect><g transform="translate(-124.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="248.109375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>/etc/apt/sources.list.d/hashicorp.list</p></span></div></foreignObject></g></g><g transform="translate(385.6640625, 175)" id="flowchart-dpkg-4" class="node default"><rect height="54" width="106.703125" y="-27" x="-53.3515625" style="" class="basic label-container"></rect><g transform="translate(-23.3515625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="46.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>dpkg等</p></span></div></foreignObject></g></g><g transform="translate(584.8359375, 175)" id="flowchart-record-5" class="node default"><rect height="54" width="191.640625" y="-27" x="-95.8203125" style="" class="basic label-container"></rect><g transform="translate(-65.8203125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="131.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>deb [options] uri ...</p></span></div></foreignObject></g></g></g></g></g></svg>
<h3 id="3つ目のパイプライン">3つ目のパイプライン</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> update</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> terraform</span></span></code></pre>
<p>パッケージをアップデートして terraform をインストールしている…だけだと味気ないので深掘り。</p>
<p>アップデートをする際、前のパイプラインで追加した <code>hashicorp.list</code> を見てパッケージ情報の入ったInReleaseファイルを取得する。
この中にはパッケージリストのハッシュ値とその署名が含まれているので、それをGPGキーで検証することで、情報が改竄されていないことを確認する。</p>
<p>インストール時も実際のパッケージファイルに対して同様の検証を行っている模様。</p>
<p>図にすると以下。</p>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 652 222" style="max-width: 652px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-2"><style>#mermaid-2{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-2 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-2 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-2 .error-icon{fill:#552222;}#mermaid-2 .error-text{fill:#552222;stroke:#552222;}#mermaid-2 .edge-thickness-normal{stroke-width:1px;}#mermaid-2 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-2 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-2 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-2 .marker{fill:#333333;stroke:#333333;}#mermaid-2 .marker.cross{stroke:#333333;}#mermaid-2 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-2 p{margin:0;}#mermaid-2 .label{font-family:arial,sans-serif;color:#333;}#mermaid-2 .cluster-label text{fill:#333;}#mermaid-2 .cluster-label span{color:#333;}#mermaid-2 .cluster-label span p{background-color:transparent;}#mermaid-2 .label text,#mermaid-2 span{fill:#333;color:#333;}#mermaid-2 .node rect,#mermaid-2 .node circle,#mermaid-2 .node ellipse,#mermaid-2 .node polygon,#mermaid-2 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-2 .rough-node .label text,#mermaid-2 .node .label text,#mermaid-2 .image-shape .label,#mermaid-2 .icon-shape .label{text-anchor:middle;}#mermaid-2 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-2 .rough-node .label,#mermaid-2 .node .label,#mermaid-2 .image-shape .label,#mermaid-2 .icon-shape .label{text-align:center;}#mermaid-2 .node.clickable{cursor:pointer;}#mermaid-2 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-2 .arrowheadPath{fill:#333333;}#mermaid-2 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-2 .flowchart-link{stroke:#333333;fill:none;}#mermaid-2 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-2 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-2 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-2 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-2 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-2 .cluster text{fill:#333;}#mermaid-2 .cluster span{color:#333;}#mermaid-2 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-2 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-2 rect.text{fill:none;stroke-width:0;}#mermaid-2 .icon-shape,#mermaid-2 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-2 .icon-shape p,#mermaid-2 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-2 .icon-shape rect,#mermaid-2 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-2 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-2 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-2 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-2_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-2_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-2_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-2_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-2_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-2_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_update_list_0" d="M107.056,62L98.768,68.167C90.48,74.333,73.904,86.667,68.462,100.376C63.019,114.086,68.711,129.172,71.556,136.715L74.402,144.257"></path><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_update_key_0" d="M185.67,62L195.337,68.167C205.004,74.333,224.338,86.667,241.614,98.597C258.89,110.528,274.109,122.056,281.718,127.821L289.327,133.585"></path><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_update_list_2" d="M161.478,62L165.62,68.167C169.761,74.333,178.045,86.667,171.937,100.597C165.829,114.528,145.33,130.056,135.081,137.821L124.831,145.585"></path><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_install_package_0" d="M512.319,62L509.045,68.167C505.77,74.333,499.221,86.667,505.248,100.574C511.275,114.48,529.877,129.961,539.179,137.701L548.48,145.441"></path><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_install_key_0" d="M488.127,62L479.327,68.167C470.528,74.333,452.928,86.667,437.23,98.574C421.532,110.48,407.736,121.961,400.838,127.701L393.94,133.441"></path><path marker-end="url(#mermaid-2_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_install_package_2" d="M562.944,62L571.232,68.167C579.52,74.333,596.096,86.667,601.538,100.376C606.981,114.086,601.289,129.172,598.444,136.715L595.598,144.257"></path></g><g class="edgeLabels"><g transform="translate(57.328125, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>1.取得</p></span></div></foreignObject></g></g><g transform="translate(243.671875, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>2.利用</p></span></div></foreignObject></g></g><g transform="translate(171.74947, 110.04354)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>2.検証</p></span></div></foreignObject></g></g><g transform="translate(492.671875, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>3.取得</p></span></div></foreignObject></g></g><g transform="translate(435.328125, 99)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>4.利用</p></span></div></foreignObject></g></g><g transform="translate(608.81624, 96.13121)" class="edgeLabel"><g transform="translate(-18.671875, -12)" class="label"><foreignObject height="24" width="37.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>4.検証</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(143.34375, 35)" id="flowchart-update-0" class="node default"><rect height="54" width="135.625" y="-27" x="-67.8125" style="" class="basic label-container"></rect><g transform="translate(-37.8125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="75.625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>apt update</p></span></div></foreignObject></g></g><g transform="translate(526.65625, 35)" id="flowchart-install-1" class="node default"><rect height="54" width="196.9375" y="-27" x="-98.46875" style="" class="basic label-container"></rect><g transform="translate(-68.46875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="136.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>apt install terraform</p></span></div></foreignObject></g></g><g transform="translate(86, 175)" id="flowchart-list-2" class="node default"><rect height="54" width="156" y="-27" x="-78" style="" class="basic label-container"></rect><g transform="translate(-48, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>パッケージリスト</p></span></div></foreignObject></g></g><g transform="translate(584, 175)" id="flowchart-package-3" class="node default"><rect height="54" width="120" y="-27" x="-60" style="" class="basic label-container"></rect><g transform="translate(-30, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="60"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>パッケージ</p></span></div></foreignObject></g></g><g transform="translate(344, 175)" id="flowchart-key-4" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>hashicorp-archive-keyring.gpg</p></span></div></foreignObject></g></g></g></g></g></svg>
<h2 id="感想">感想</h2>
<p>パッケージマネージャ周りがよく分かっていないと思い知らされた。
<code>apt update</code>, <code>apt install</code> 周りはまた調べることにする。</p> </div>  </div> </body></html>